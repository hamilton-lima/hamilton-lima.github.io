<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>CORS is your friend - Hamilton Lima</title>
<meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://hamiltonlima.com/favicon.png><link rel=canonical href=https://hamiltonlima.com/posts/cors-is-your-friend/><link rel=stylesheet href=/css/style.min.341d362bef2b6b1437e0cefb99a0cb7e4141b6954f8398c1b10275f699edc362.css><link rel=stylesheet href=/assets/css/extended.min.9729f28a5087b689b946e103d96abd63bfd37b1417effa251dbf798312e3fba5.css><meta property="og:title" content="CORS is your friend"><meta property="og:type" content="website"><meta property="og:url" content="https://hamiltonlima.com/posts/cors-is-your-friend/"><meta name=twitter:card content="summary"><meta name=twitter:site content="@zerostaticio"><meta name=twitter:creator content="@zerostaticio"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&amp;display=swap" rel=stylesheet></head><body class='page frame page-blog-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-posts><a href=https://hamiltonlima.com/posts>Posts</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=/>Hamilton Lima</a><div class=menu-main><ul><li class=menu-item-posts><a href=/posts><span>Posts</span></a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=blog><div class=intro><h1>CORS is your friend<span class=dot>.</span></h1></div><div class=content><p>As soon we started to test the integration of the server side with the mobile application we found out that we were missing one little detail</p><blockquote><p>Enable Cross Origin Resource Sharing!</p></blockquote><p>Those beatiful words means: We sould tell the server to allow other servers to call our services :) As we are not doing any kind of authentication we should let any server make the calls. So we just went to <a href=http://enable-cors.org/server.html>http://enable-cors.org/server.html</a> waiting to find some answers, sadly there were no playframework information there, but as this would be implementede easily as a Java Filter (we should only add one line to the response headers) we found the proper documentation at <a href=https://www.playframework.com/documentation/2.5.x/CorsFilter>https://www.playframework.com/documentation/2.5.x/CorsFilter</a> Of course we could implement a <a href=https://www.playframework.com/documentation/2.5.x/ScalaHttpFilters>filter</a> to do it, but is much simpler to just use what is already tested :) so we just follow the instructions that are in summary:</p><ul><li>enable the filter at build.sbt, libraryDependencies += filters</li><li>make the changes to the Filter class, to use the CORSFilter</li><li>configure the parameters of the CORS filter at applications.conf</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>play.filters {
</span></span><span class=line><span class=cl> cors {
</span></span><span class=line><span class=cl> # allow all paths
</span></span><span class=line><span class=cl> pathPrefixes = \[&#34;/&#34;\]
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> # allow all origins (You can specify if you want)
</span></span><span class=line><span class=cl> **allowedOrigins = null**
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> allowedHttpMethods = \[&#34;GET&#34;, &#34;POST&#34;, &#34;PUT&#34;, &#34;DELETE&#34;\]
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> # allow all headers
</span></span><span class=line><span class=cl> allowedHttpHeaders = null
</span></span><span class=line><span class=cl> }
</span></span><span class=line><span class=cl> ...
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>Now all your attention to this:</p><blockquote><p>allowedOrigins should be NULL to accept ANY origin.</p></blockquote><p>Other warning before you loose some time trying to find out why the &ldquo;Access-Control-Allow-Origin: *&rdquo; header is NOT showing at all in the response, like this screenshot below from the <a href=https://developer.chrome.com/devtools>Chrome inspector</a>. <img src=/images/2016/10/no_cors_response_headers.png alt=no_cors_response_headers></p><blockquote><p>&mldr;by default no headers are exposed&mldr;</p></blockquote><p>So don´t expect the header to show unless you setup to show. To test if the CORS is working properly use this site that offer an quick and easy test environment that make a call to your service to check if CORS is ok. <a href=http://www.test-cors.org/>http://www.test-cors.org/</a></p></div></div><div class=footer><div class=footer-social><span class="social-icon social-icon-twitter"><a href=https://twitter.com/athanazio title=twitter target=_blank rel=noopener><img src=/images/icons/twitter.svg width=24 height=24 alt=twitter>
</a></span><span class="social-icon social-icon-github"><a href=https://github.com/hamilton-lima title=github target=_blank rel=noopener><img src=/images/icons/github.svg width=24 height=24 alt=github>
</a></span><span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com/in/hamiltonlima title=linkedin target=_blank rel=noopener><img src=/images/icons/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/js/bundle.min.5993fcb11c07dea925a3fbd58c03c7f1857197c35fccce3aa963a12c0b3c9960.js></script></body></html>