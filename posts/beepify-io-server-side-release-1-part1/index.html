<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>beepify.io, server side release 1 - part 1 - Hamilton Lima</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://hamiltonlima.comfavicon.png><link rel=canonical href=https://hamiltonlima.com/posts/beepify-io-server-side-release-1-part1/><link rel=stylesheet href=/css/style.min.381fd69187be1f5dde5031ac9014016e77965dbc38358cb065b6fede27b5861c.css><link rel=stylesheet href=/assets/css/extended.min.9729f28a5087b689b946e103d96abd63bfd37b1417effa251dbf798312e3fba5.css><meta property="og:title" content="beepify.io, server side release 1 - part 1"><meta property="og:type" content="website"><meta property="og:url" content="https://hamiltonlima.com/posts/beepify-io-server-side-release-1-part1/"><meta name=twitter:card content="summary"><meta name=twitter:site content="@athanazio"><meta name=twitter:creator content="@athanazio"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel=stylesheet></head><body class="page frame page-blog-single"><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-posts><a href=https://hamiltonlima.com/posts>Posts</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=/>Hamilton Lima</a><div class=menu-main><ul><li class=menu-item-posts><a href=/posts><span>Posts</span></a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=blog><div class=intro><h1>beepify.io, server side release 1 - part 1<span class=dot>.</span></h1></div><div class=content><p>These are the server side release 1 original plan, that is complete with some minor changes highlighted on each line</p><ul><li>Install playframework environment - <a href=https://hamiltonlima.com/blog/beepify-io-implementation-plan/>not in the original plan</a></li><li>Create the models</li><li>Read current location latitude, longitude</li><li>Add sample data to the database - changed to use a service to create data instead of SQL to add data</li><li>Create services</li><li>Get data receive product code, latitude and longitude</li><li>Return all prices</li></ul><p>It´s impressive how environment setup takes time, usually we forget to include this step when planning projects, but believe me this takes of time in a project, let´s go over each step I did on this implementation.</p><h3 id=playframework-install>Playframework install</h3><p><img src=/images/2016/10/2016-10-17_1626.png alt=2016-10-17_1626></p><p>The installation is very straight forward: <a href=http://playframework.com/download>download the package</a>, save to a easy to remember folder, add the bin folder to the path and you are ALMOST done.</p><p>Next step create the project </p><p>I say almost, because the first time you create a project, the activator will download all the necessary libraries&mldr; seriously this takes time :) and if you are creating your project inside a dropbox folder as I did, remember to disable dropbox while activator is downloading the files.</p><h3 id=how-tocreate-the-project>How to create the project</h3><ul><li>at the console, at windows: windows / run / cmd</li><li>cd to the root folder of your projects</li><li>run: activator new</li><li>I pick the project type: play-java</li><li>goto the project folder, in this example: cd beepify</li><li>run the project: activator run, &mldr; then wait forever to the download complete.</li></ul><p>While the download was working I use the time to watch this nice overview on playframework: <a href="http://www.youtube.com/watch?v=bLrmnjPQsZc">https://www.youtube.com/watch?v=bLrmnjPQsZc</a></p><h3 id=ide-integration---eclipse>IDE integration - Eclipse</h3><p>As I use Eclipse since forever, I really need to make sure I can edit Java code on it. The instructions are very clear on the <a href=https://www.playframework.com/documentation/2.5.x/IDE>documentation</a>, but there is one point that I should highlight:</p><blockquote><p>COMPILE the project BEFORE running the eclipse command</p></blockquote><p>You will need to add Scala integration so it´s easier to edit the templates, that are by default written in scala, just install this plugin http://scala-ide.org/download/current.html. As I´m familiar with all the option from the plugin I just then all, it worked fine.</p><p>If you know how to install plugins in eclipse from urls, here it is: http://download.scala-ide.org/sdk/lithium/e44/scala211/stable/site</p><p>Now that you have your eclipse ready to import the project, add the following changes BEFORE you compile the project</p><p>on file: project/plugins.sbt</p><p>addSbtPlugin(&ldquo;com.typesafe.sbt&rdquo; % &ldquo;sbt-play-ebean&rdquo; % &ldquo;3.0.2&rdquo;)<br>addSbtPlugin(&ldquo;com.typesafe.sbteclipse&rdquo; % &ldquo;sbteclipse-plugin&rdquo; % &ldquo;4.0.0&rdquo;)</p><p>on file: build.sbt</p><p>enablePlugins(PlayEbean)</p><p>Run the activator at the project folder, and in the activator console run : </p><ul><li>reload</li><li>compile</li><li>eclipse</li></ul><p>After this finished go to eclipse and import the project to the Eclipse workspace</p><h3 id=prepare-the-database>Prepare the database</h3><p>Play apps can run with in memory databases, but I want to start with a more real example using mysql as database, the first thing to do is to create the database and the user that your application will use to store the data, I put together this script that I save in the docs folder of the project.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>CREATE USER &#39;beepify\_user\_db&#39;@&#39;%&#39; IDENTIFIED BY &#39;fFRbUPmS9BSHggR&#39;;
CREATE USER &#39;beepify\_user\_db&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;fFRbUPmS9BSHggR&#39;;

CREATE SCHEMA db\_beepify DEFAULT CHARACTER SET utf8;
GRANT ALL PRIVILEGES ON db\_beepify.\* TO &#39;beepify\_user\_db&#39;@&#39;%&#39; WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON db\_beepify.\* TO &#39;beepify\_user\_db&#39;@&#39;localhost&#39; WITH GRANT OPTION;
FLUSH PRIVILEGES;
</code></pre></div><p>You can generate nice and <a href="https://www.random.org/passwords/?num=5&len=15&format=html&rnd=new">random passwords here</a>, and the above username, database names and passwords are not the ones I used :)</p><p>Change play configuration to use the new database</p><p><strong>change to match the following at conf/application.conf</strong></p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>play.db {
  config = &#34;db&#34;
  default = &#34;default&#34;
... 

db {
    default.driver=com.mysql.jdbc.Driver
    default.url=&#34;jdbc:mysql://127.0.0.1:3306/db\_beepify?characterEncoding=UTF-8&#34;
    default.username=beepify\_user\_db
    default.password=&#34;fFRbUPmS9BSHggR&#34;

...
</code></pre></div><p>ebean.default="models.*&rdquo;</p><blockquote><p>Important comment on this configuration: ebean.default="models.*&rdquo; will indicate to Ebean framework, that is the ORM framework installed by default with Playframework, that the package models is used to store all of your models</p></blockquote><p><strong>add to build.sbt</strong></p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>libraryDependencies += &#34;mysql&#34; % &#34;mysql-connector-java&#34; % &#34;5.1.36&#34;
libraryDependencies += evolutions

enablePlugins(PlayEbean)
</code></pre></div><p>With these configurations in place you are ready to build the application.</p></div></div><div class=footer><div class=footer-social><span class="social-icon social-icon-twitter"><a href=https://twitter.com/athanazio title=twitter target=_blank rel=noopener><img src=/images/icons/twitter.svg width=24 height=24 alt=twitter></a></span>
<span class="social-icon social-icon-github"><a href=https://github.com/hamilton-lima title=github target=_blank rel=noopener><img src=/images/icons/github.svg width=24 height=24 alt=github></a></span>
<span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com/in/hamiltonlima title=linkedin target=_blank rel=noopener><img src=/images/icons/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/js/bundle.min.df8701b5f509374aa1fd6b7f39e6100d9eedbb268d023d3bec1a6e8220fd6dee.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-J7T3DC7D47"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-J7T3DC7D47');</script></body></html>