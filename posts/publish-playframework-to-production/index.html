<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>publish playframework to production - Hamilton Lima</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://hamiltonlima.comfavicon.png><link rel=canonical href=https://hamiltonlima.com/posts/publish-playframework-to-production/><link rel=stylesheet href=/css/style.min.381fd69187be1f5dde5031ac9014016e77965dbc38358cb065b6fede27b5861c.css><link rel=stylesheet href=/assets/css/extended.min.9729f28a5087b689b946e103d96abd63bfd37b1417effa251dbf798312e3fba5.css><meta property="og:title" content="publish playframework to production"><meta property="og:type" content="website"><meta property="og:url" content="https://hamiltonlima.com/posts/publish-playframework-to-production/"><meta name=twitter:card content="summary"><meta name=twitter:site content="@athanazio"><meta name=twitter:creator content="@athanazio"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel=stylesheet></head><body class="page frame page-blog-single"><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-posts><a href=https://hamiltonlima.com/posts>Posts</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=/>Hamilton Lima</a><div class=menu-main><ul><li class=menu-item-posts><a href=/posts><span>Posts</span></a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=blog><div class=intro><h1>publish playframework to production<span class=dot>.</span></h1></div><div class=content><p>Running an playframework application locally is very easy, you just go to the folder, and run</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>activator
run
</code></pre></div><p>But how to put all of the necessary files at a server? end of the day we are talking about lots of files and dependencies. Luckly, <a href=https://www.playframework.com/documentation/2.5.x/Deploying>playframework has a command and instructions</a> for that, its called</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>dist
</code></pre></div><p>That creates an zip file with all the necessary libraries and config files in order to run the application at the server. The name of the file will be based on the version that is setup in the build.sbt file, for example: version := &ldquo;1.0&rdquo;, would result in a file named: beepify\target\universal\beepify-1.1.zip After the dist command finishes, just upload the file to the server. Simple solution is create an user at the server, <a href=https://filezilla-project.org/>connect using SFTP/ SSH</a> and send the file to the /tmp folder. After the upload install Java and unzip the file to the folder where it will live, I /var/www/beepify-1-1, here are the commands I used after logging on the server as root [yes I know that shouldn´t log as root :)] :</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>sudo apt-get install default-jdk
sudo apt-get install unzip
cd /tmp
unzip beepify-1.1.zip
mv beepify-1.1 /var/www
cd /var/www/beepify-1.1/bin
nohup ./beepify &amp;
</code></pre></div><p>The last command, the one with nohup, captures the console outputs from the application in a file called nohup.out and the & at the end make sure that you can close the console without closing the application. When you start the application the file RUNNING_PID is created at the application folder with the process id of the running application, If the application crashes you need to remove this files before you start it again. Other important configuration is to setup nginx to redirect /beepify to the 9000 port where the application is running. but there is one little issue that I had to deal with. A simple reverse proxy of with /beepify, would result in a call to host:9000/beepify/ at my application, in order to makeit work, I would need to change all my routes, adding the application name, so the routes would be /beepify/products for example instead of /products. That wasn´t acceptable, let´s say I want to change the exposed url for any reason, that would be hardcoded in the application. let´s we need to publish more than one url and split traffic for example? so fixed preffix names are not a good idea. I rather created an rule in the proxy to remove from the urls the preffix /beepify when redirecting to the application at port 9000. This is the location definition I used on /etc/nginx/nginx.conf location</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>location /beepify {
   rewrite ^/beepify(/.\*)$ $1 break;
   proxy\_pass http://127.0.0.1:9000/;
}
</code></pre></div><p>See more rules here: <a href=https://www.nginx.com/blog/creating-nginx-rewrite-rules/>Creating NGINX rewrite rules</a></p></div></div><div class=footer><div class=footer-social><span class="social-icon social-icon-twitter"><a href=https://twitter.com/athanazio title=twitter target=_blank rel=noopener><img src=/images/icons/twitter.svg width=24 height=24 alt=twitter></a></span>
<span class="social-icon social-icon-github"><a href=https://github.com/hamilton-lima title=github target=_blank rel=noopener><img src=/images/icons/github.svg width=24 height=24 alt=github></a></span>
<span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com/in/hamiltonlima title=linkedin target=_blank rel=noopener><img src=/images/icons/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/js/bundle.min.df8701b5f509374aa1fd6b7f39e6100d9eedbb268d023d3bec1a6e8220fd6dee.js></script></body></html>