<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Image Processing with Ionic - Hamilton Lima</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://hamiltonlima.comfavicon.png><link rel=canonical href=https://hamiltonlima.com/posts/image-processing-with-ionic/><link rel=stylesheet href=/css/style.min.381fd69187be1f5dde5031ac9014016e77965dbc38358cb065b6fede27b5861c.css><link rel=stylesheet href=/assets/css/extended.min.9729f28a5087b689b946e103d96abd63bfd37b1417effa251dbf798312e3fba5.css><meta property="og:title" content="Image Processing with Ionic"><meta property="og:type" content="website"><meta property="og:url" content="https://hamiltonlima.com/posts/image-processing-with-ionic/"><meta name=twitter:card content="summary"><meta name=twitter:site content="@athanazio"><meta name=twitter:creator content="@athanazio"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel=stylesheet></head><body class="page frame page-blog-single"><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-posts><a href=https://hamiltonlima.com/posts>Posts</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=/>Hamilton Lima</a><div class=menu-main><ul><li class=menu-item-posts><a href=/posts><span>Posts</span></a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=blog><div class=intro><h1>Image Processing with Ionic<span class=dot>.</span></h1></div><div class=content><p>One of these days at the office at the end of an inspiring meeting we found ourselves stuck. Image some experienced Software Engineers trying to find a proper angle to make a picture. That&rsquo;s right trying to find an angle, and the best we could do was this. <img src=/images/2018/05/2018-05-16-12.32.53.jpg alt> Most of the meeting room walls are made of glass, it&rsquo;s an invitation to make notes, to draw, but how to make pictures of it so we can save as &ldquo;documentation&rdquo;. The <a href=https://github.com/hamilton-lima/glassCamera>https://github.com/hamilton-lima/glassCamera</a> project is a prototype to explore solutions to this problem, The initial implementation creates an image filter using color distance to filter the image and create a black and white version of it. as expected the result is not perfect but the exploration of the current state of <a href=https://ionicframework.com/>Ionic</a> worth the effort.</p><h3 id=here-are-the-notes-from-the-exploration>Here are the notes from the exploration:</h3><ul><li>There is no camera in the ionic browser neither in the emulator, I could Mock the camera with a fixed image, but I rather use a real device and in this case an iPhone.</li><li>The <a href=https://github.com/hamilton-lima/glassCamera/blob/master/config.xml>config.xml</a> file is where you define what features you want to use the device, you will see at the end of the file the intent to use the camera and the gallery to save images.</li><li>The <a href=https://ionicframework.com/docs/components/#buttons>Ionic framework</a> uses <a href=https://angular.io/>Angular 5</a>, use <a href=https://www.typescriptlang.org/>Typescript</a> and the nice <a href=https://github.com/hamilton-lima/glassCamera/tree/master/src/pages/home>component organization</a> was indeed a very good experience.</li><li>I used a <a href=https://ionicframework.com/docs/api/components/range/Range/>Range</a> component as input for the minimum color distance, but every time I touched the component the &ldquo;ionChange&rdquo; an event was triggered making too many calls to the image update, <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/home.html#L4>adding &ldquo;debounce&rdquo; attribute set as 500</a>, that waits for 500milisecs before triggering the change event solved the problem.</li><li><a href=https://en.wikipedia.org/wiki/Euclidean_distance>Euclidian distance</a> is used to calculate how similar the colors are, the implementation can be found at <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/imageprocessor.ts#L109>colorDistance</a> method.</li><li>The <a href=https://github.com/hamilton-lima/glassCamera/blob/master/src/pages/home/imageprocessor.ts>image processing</a> workflow is : <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/imageprocessor.ts#L125>create an Image object in-memory,</a> load the base64 data in it, draw in a in-memory canvas, for each pixel <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/imageprocessor.ts#L88>that has a color close to the target color</a> is painted black and the others white, then <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/imageprocessor.ts#L98>create a new image with the results</a>, draw in a new canvas and return the updated base64, piece of cake :D.</li></ul><p>There are several links in the post for the project, feel free to use as you want. This is the main page in case you missed the links <a href=https://github.com/hamilton-lima/glassCamera>https://github.com/hamilton-lima/glassCamera.</a></p></div></div><div class=footer><div class=footer-social><span class="social-icon social-icon-twitter"><a href=https://twitter.com/athanazio title=twitter target=_blank rel=noopener><img src=/images/icons/twitter.svg width=24 height=24 alt=twitter></a></span>
<span class="social-icon social-icon-github"><a href=https://github.com/hamilton-lima title=github target=_blank rel=noopener><img src=/images/icons/github.svg width=24 height=24 alt=github></a></span>
<span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com/in/hamiltonlima title=linkedin target=_blank rel=noopener><img src=/images/icons/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/js/bundle.min.df8701b5f509374aa1fd6b7f39e6100d9eedbb268d023d3bec1a6e8220fd6dee.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-J7T3DC7D47"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-J7T3DC7D47');</script></body></html>