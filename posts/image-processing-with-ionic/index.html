<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#ffb703"><meta name=msapplication-TileColor content="#ffb703"><meta itemprop=name content="Image Processing with Ionic"><meta itemprop=description content="One of these days at the office at the end of an inspiring meeting we found ourselves stuck. Image some experienced Software Engineers trying to find a proper angle to make a picture. That&rsquo;s right trying to find an angle, and the best we could do was this. Most of the meeting room walls are made of glass, it&rsquo;s an invitation to make notes, to draw, but how to make pictures of it so we can save as &ldquo;documentation&rdquo;."><meta itemprop=datePublished content="2018-05-21T12:52:49+00:00"><meta itemprop=dateModified content="2018-05-21T12:52:49+00:00"><meta itemprop=wordCount content="391"><meta itemprop=keywords content="color,filter,glass,image processing,ionic,ionicframework,mobile,photo,picture,selfhackaton,"><meta property="og:title" content="Image Processing with Ionic"><meta property="og:description" content="One of these days at the office at the end of an inspiring meeting we found ourselves stuck. Image some experienced Software Engineers trying to find a proper angle to make a picture. That&rsquo;s right trying to find an angle, and the best we could do was this. Most of the meeting room walls are made of glass, it&rsquo;s an invitation to make notes, to draw, but how to make pictures of it so we can save as &ldquo;documentation&rdquo;."><meta property="og:type" content="article"><meta property="og:url" content="https://hamiltonlima.com/posts/image-processing-with-ionic/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-05-21T12:52:49+00:00"><meta property="article:modified_time" content="2018-05-21T12:52:49+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Image Processing with Ionic"><meta name=twitter:description content="One of these days at the office at the end of an inspiring meeting we found ourselves stuck. Image some experienced Software Engineers trying to find a proper angle to make a picture. That&rsquo;s right trying to find an angle, and the best we could do was this. Most of the meeting room walls are made of glass, it&rsquo;s an invitation to make notes, to draw, but how to make pictures of it so we can save as &ldquo;documentation&rdquo;."><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/hamilton-2022-32x32.png><link rel=icon type=image/png sizes=16x16 href=/hamilton-2022-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>Image Processing with Ionic</title><link rel=stylesheet href=https://hamiltonlima.com/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://hamiltonlima.com>Hamilton Lima</a></div><nav class="site-nav hide-in-mobile"><a href=https://hamiltonlima.com/posts>Posts</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/athanazio target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/hamilton-lima target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://hamiltonlima.com/posts>Posts</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>May 21, 2018</span></div><h1>Image Processing with Ionic</h1></header><div class=content><p>One of these days at the office at the end of an inspiring meeting we found ourselves stuck. Image some experienced Software Engineers trying to find a proper angle to make a picture. That&rsquo;s right trying to find an angle, and the best we could do was this. <img src=/images/2018/05/2018-05-16-12.32.53.jpg alt> Most of the meeting room walls are made of glass, it&rsquo;s an invitation to make notes, to draw, but how to make pictures of it so we can save as &ldquo;documentation&rdquo;. The <a href=https://github.com/hamilton-lima/glassCamera>https://github.com/hamilton-lima/glassCamera</a> project is a prototype to explore solutions to this problem, The initial implementation creates an image filter using color distance to filter the image and create a black and white version of it. as expected the result is not perfect but the exploration of the current state of <a href=https://ionicframework.com/>Ionic</a> worth the effort.</p><h3 id=here-are-the-notes-from-the-exploration>Here are the notes from the exploration:<a href=#here-are-the-notes-from-the-exploration class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><ul><li>There is no camera in the ionic browser neither in the emulator, I could Mock the camera with a fixed image, but I rather use a real device and in this case an iPhone.</li><li>The <a href=https://github.com/hamilton-lima/glassCamera/blob/master/config.xml>config.xml</a> file is where you define what features you want to use the device, you will see at the end of the file the intent to use the camera and the gallery to save images.</li><li>The <a href=https://ionicframework.com/docs/components/#buttons>Ionic framework</a> uses <a href=https://angular.io/>Angular 5</a>, use <a href=https://www.typescriptlang.org/>Typescript</a> and the nice <a href=https://github.com/hamilton-lima/glassCamera/tree/master/src/pages/home>component organization</a> was indeed a very good experience.</li><li>I used a <a href=https://ionicframework.com/docs/api/components/range/Range/>Range</a> component as input for the minimum color distance, but every time I touched the component the &ldquo;ionChange&rdquo; an event was triggered making too many calls to the image update, <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/home.html#L4>adding &ldquo;debounce&rdquo; attribute set as 500</a>, that waits for 500milisecs before triggering the change event solved the problem.</li><li><a href=https://en.wikipedia.org/wiki/Euclidean_distance>Euclidian distance</a> is used to calculate how similar the colors are, the implementation can be found at <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/imageprocessor.ts#L109>colorDistance</a> method.</li><li>The <a href=https://github.com/hamilton-lima/glassCamera/blob/master/src/pages/home/imageprocessor.ts>image processing</a> workflow is : <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/imageprocessor.ts#L125>create an Image object in-memory,</a> load the base64 data in it, draw in a in-memory canvas, for each pixel <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/imageprocessor.ts#L88>that has a color close to the target color</a> is painted black and the others white, then <a href=https://github.com/hamilton-lima/glassCamera/blob/3915d99041f7aa82fa4dc0a97a66a3f4b52d6228/src/pages/home/imageprocessor.ts#L98>create a new image with the results</a>, draw in a new canvas and return the updated base64, piece of cake :D.</li></ul><p>There are several links in the post for the project, feel free to use as you want. This is the main page in case you missed the links <a href=https://github.com/hamilton-lima/glassCamera>https://github.com/hamilton-lima/glassCamera.</a></p></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://hamiltonlima.com/tags/color>color</a></span><span class=tag><a href=https://hamiltonlima.com/tags/filter>filter</a></span><span class=tag><a href=https://hamiltonlima.com/tags/glass>glass</a></span><span class=tag><a href=https://hamiltonlima.com/tags/image-processing>image processing</a></span><span class=tag><a href=https://hamiltonlima.com/tags/ionic>ionic</a></span><span class=tag><a href=https://hamiltonlima.com/tags/ionicframework>ionicframework</a></span><span class=tag><a href=https://hamiltonlima.com/tags/mobile>mobile</a></span><span class=tag><a href=https://hamiltonlima.com/tags/photo>photo</a></span><span class=tag><a href=https://hamiltonlima.com/tags/picture>picture</a></span><span class=tag><a href=https://hamiltonlima.com/tags/selfhackaton>selfhackaton</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>391 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2018-05-21 12:52 +0000</p></footer></article><div class="post-nav thin"><a class=next-post href=https://hamiltonlima.com/posts/avoid-insanity-when-handling-errors-with-chai/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>Avoid insanity when handling errors with Chai</span></a>
<a class=prev-post href=https://hamiltonlima.com/posts/using-redis-publish-and-subscribe/><span class=post-nav-label>Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>Using Redis Publish and Subscribe</span></a></div><div id=comments class=thin></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2022 <a href=https://hamiltonlima.com>Hamilton Lima</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://hamiltonlima.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://hamiltonlima.com/js/bundle.min.5a42c67b729ee2fa1059251688235399704707e04edb4e28c42c6f6dfa49d1d9.js integrity="sha256-WkLGe3Ke4voQWSUWiCNTmXBHB+BO204oxCxvbfpJ0dk=" crossorigin=anonymous></script></body></html>