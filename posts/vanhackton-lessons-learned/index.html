<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Vanhackton - Lessons Learned - Hamilton Lima</title>
<meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://hamiltonlima.com/favicon.png><link rel=canonical href=https://hamiltonlima.com/posts/vanhackton-lessons-learned/><link rel=stylesheet href=/css/style.min.341d362bef2b6b1437e0cefb99a0cb7e4141b6954f8398c1b10275f699edc362.css><link rel=stylesheet href=/assets/css/extended.min.9729f28a5087b689b946e103d96abd63bfd37b1417effa251dbf798312e3fba5.css><meta property="og:title" content="Vanhackton - Lessons Learned"><meta property="og:type" content="website"><meta property="og:url" content="https://hamiltonlima.com/posts/vanhackton-lessons-learned/"><meta name=twitter:card content="summary"><meta name=twitter:site content="@zerostaticio"><meta name=twitter:creator content="@zerostaticio"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&amp;display=swap" rel=stylesheet></head><body class='page frame page-blog-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-posts><a href=https://hamiltonlima.com/posts>Posts</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=/>Hamilton Lima</a><div class=menu-main><ul><li class=menu-item-posts><a href=/posts><span>Posts</span></a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=blog><div class=intro><h1>Vanhackton - Lessons Learned<span class=dot>.</span></h1></div><div class=content><p><img src=/images/2016/10/2014-06-22-18.26.36.png alt="National Monument at Kuala Lumpur, Malaysia"> After a very intense weekend I feel like coming from the battle :) But it feels very good to deliver a good result in such a small timeframe. On this post I will describe some lessons learned from the past weekend and some decisions I made that worth.</p><h2 id=poc---the-start>POC - the start</h2><p>For every project, I allways plan for proof of concepts, small implementations that isolate the implementation complexity by implementing just the necessary, to solve one problem. On this case the problem to solve was:</p><blockquote><p>How to show a DIV over the youtube video</p></blockquote><p>One mistake that I believe I made was that during the research of existing solutions, I only evaluated the UI itself, didn´t look at the page source code to check how they did it. That result in some extra hours to understand how to do it and to implement it. End of the day it worked fine, but it would be better if I read that source codes :) See <a href=https://github.com/hamilton-lima/vanhackaton-video-editor/blob/master/server/client/css/index.css>index.css</a> at #video and #video #questions about the solution used to show the div over the video.</p><h2 id=the-timeline-control>The timeline control</h2><p><img src=/images/2016/10/2016-10-26_2011.png alt=2016-10-26_2011> The timeline control was a tricky part of the implementation, first I created a div for the white background, then small blue divs over it at the proportional position to show the question timeline. Everything was going until the moment that I felt like I need to drag those divs to change the question second. After trying a lot to use <a href=http://api.jqueryui.com/draggable/#option-containment>dragable()</a> I wasn´t able to make it work inside the div with &ldquo;position: absolute&rdquo;. So I changed plans and created a <a href=http://www.createjs.com/easeljs>EaseJS</a> <a href=http://www.createjs.com/docs/easeljs/classes/Stage.html>stage</a> to draw the timeline and allow the user to drag it and change the question second by dragging it. I know that I should have a little message pushing the user to drag it, or at least change the cursor to indicate that the timeline bars are dragable, but this I realize after everything is finished :) To see the timeline implementation, look for it at <a href=https://github.com/hamilton-lima/vanhackaton-video-editor/blob/master/server/client/app/app.js>app.js</a> at the directive &ldquo;draggableTimeline&rdquo;, that of course should be in a separated file.</p><h2 id=the-database-choice>The database choice</h2><p>My first option was to save all the data in flat files, using folders to separate the stories for each user, and to keep one master pointing for the files in the folders, but I drop this idea really quick, when I start to remember how flat files handling can be a pain, specially about zombie processes locking files. So instead of going in the direction of setting an <a href=http://nosql-database.org/>NoSQL DB</a>, or an relational like <a href=https://www.mysql.com/>Mysql</a> or <a href=https://www.postgresql.org/>Postgres</a>, I decided to keep it as simple as possible by going with <a href=https://sqlite.org/>SQLLite</a>. That decision saved me some hours of handling issues like: server setup, user creation, access rights. Everything was plain simple. It was just a matter of write a code to create the table, and some code to save data, yes plain INSERTs, and read data when need, using plain SQL. One main improvement that I can see from the implementation is to separate the database access details in a separated component, So it would be easier to plug other database imeplemention without changing everything. One detail that I believe it worth highlight is that the query function are asynchronous, I gave a try on some implementations using <a href=https://github.com/kriasoft/node-sqlite>Promisses over SQLLite</a>, but I didn&rsquo;t like the syntax at all, It looks confusing to me the end result, this could be result of my stress during the weekend, or quick judgement to avoid potential risks. End of the day <a href=https://github.com/hamilton-lima/vanhackaton-video-editor/blob/master/server/index.js>implemented a simple solution to handle it.</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>app</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;/api/story/:id&#39;</span><span class=p>,</span> <span class=n>function</span> <span class=p>(</span><span class=n>req</span><span class=p>,</span> <span class=n>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>var</span> <span class=n>msg</span> <span class=o>=</span> <span class=s1>&#39;get story from id: &#39;</span> <span class=o>+</span> <span class=n>req</span><span class=o>.</span><span class=n>params</span><span class=o>.</span><span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>msg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>var</span> <span class=n>result</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>all</span><span class=p>(</span><span class=s1>&#39;SELECT \* FROM story WHERE id = ? &#39;</span><span class=p>,</span> <span class=n>req</span><span class=o>.</span><span class=n>params</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=n>function</span><span class=p>(</span><span class=n>err</span><span class=p>,</span><span class=n>rows</span><span class=p>){</span><span class=o>**</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=n>err</span><span class=p>){</span>
</span></span><span class=line><span class=cl>			<span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>&#39;error: &#39;</span><span class=p>,</span> <span class=n>err</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>  			<span class=o>**</span><span class=n>res</span><span class=o>.</span><span class=n>status</span><span class=p>(</span><span class=mi>500</span><span class=p>)</span><span class=o>.</span><span class=n>send</span><span class=p>({</span> <span class=n>error</span><span class=p>:</span> <span class=n>err</span> <span class=p>});</span><span class=o>**</span>
</span></span><span class=line><span class=cl>  			<span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  		<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>rows</span><span class=p>));</span>
</span></span><span class=line><span class=cl>		<span class=n>res</span><span class=o>.</span><span class=n>json</span><span class=p>(</span><span class=n>rows</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>In this fragment of code there is a pitfall, that got me several times, that is to forget the return; just after the .status(500).send(&mldr;), I know that the send() method does not end the the function, but somewhere in my brain that line is wired as final, because we literally cannot send anything else as result after that.</p><h2 id=components-hall-of-fame>Components Hall of fame</h2><p>These are the shiny little guys that made my life easier!</p><h3 id=client-side>Client side</h3><ul><li>Youtube player API <a href=https://developers.google.com/youtube/iframe_api_reference#Playback_controls>https://developers.google.com/youtube/iframe_api_reference#Playback_controls</a></li><li>Angular youtube component <a href=https://github.com/brandly/angular-youtube-embed>https://github.com/brandly/angular-youtube-embed</a></li><li>Number format (seconds to hour:minute) just lovely &lt;3 <a href=http://numeraljs.com/>http://numeraljs.com/</a></li><li>Angular inline edit <a href=https://github.com/tameraydin/ng-inline-edit>https://github.com/tameraydin/ng-inline-edit</a></li><li>Angular scroll <a href=https://github.com/oblador/angular-scroll/>https://github.com/oblador/angular-scroll/</a></li><li>Angular UI bootstrap <a href=https://angular-ui.github.io/bootstrap/>https://angular-ui.github.io/bootstrap/</a></li></ul><h3 id=server-side>Server side</h3><ul><li>Install express routing <a href=https://expressjs.com/en/starter/installing.html>https://expressjs.com/en/starter/installing.html</a></li><li>Install sqllite3 <a href=https://www.npmjs.com/package/sqlite3>https://www.npmjs.com/package/sqlite3</a> Examples using sqllite3 <a href=http://blog.modulus.io/nodejs-and-sqlite>http://blog.modulus.io/nodejs-and-sqlite</a></li><li>Install body parser (don´t forget this one) <a href=https://github.com/expressjs/body-parser>https://github.com/expressjs/body-parser</a></li><li>Sqllite navigator <a href=http://sqlitebrowser.org/>http://sqlitebrowser.org/</a> Icons Used as favicon one icon made by <a href=http://www.flaticon.com/authors/madebyoliver>Madebyoliver</a> from <a href=http://www.flaticon.com>http://www.flaticon.com</a> Licensed by <a href=http://creativecommons.org/licenses/by/3.0>http://creativecommons.org/licenses/by/3.0</a>/</li></ul><h2 id=projectlinks>Project Links</h2><ul><li>Project pitch: <a href=https://youtu.be/Wx09vx0tZd0>https://youtu.be/Wx09vx0tZd0</a></li><li>Live demo: <a href=http://hamiltonlima.com:3000>http://hamiltonlima.com:3000</a></li><li>Source code: <a href=https://github.com/hamilton-lima/vanhackaton-video-editor>https://github.com/hamilton-lima/vanhackaton-video-editor</a></li><li>Project pitch in portuguese: <a href="https://www.youtube.com/watch?v=vcZZ0uiL2Ns">https://www.youtube.com/watch?v=vcZZ0uiL2Ns</a></li></ul><h2 id=vote>Vote</h2><p>If you like the project, goto to the url bellow and click on WANT to vote for it. <a href=https://wantoo.io/vanhackathon/5561/video-editor/>https://wantoo.io/vanhackathon/5561/video-editor/</a> <a href=https://wantoo.io/vanhackathon/5561/video-editor/><img src=/images/2016/10/vote.jpg alt=vote></a></p></div></div><div class=footer><div class=footer-social><span class="social-icon social-icon-twitter"><a href=https://twitter.com/athanazio title=twitter target=_blank rel=noopener><img src=/images/icons/twitter.svg width=24 height=24 alt=twitter>
</a></span><span class="social-icon social-icon-github"><a href=https://github.com/hamilton-lima title=github target=_blank rel=noopener><img src=/images/icons/github.svg width=24 height=24 alt=github>
</a></span><span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com/in/hamiltonlima title=linkedin target=_blank rel=noopener><img src=/images/icons/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/js/bundle.min.5993fcb11c07dea925a3fbd58c03c7f1857197c35fccce3aa963a12c0b3c9960.js></script></body></html>