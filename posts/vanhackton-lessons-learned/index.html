<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#ffb703"><meta name=msapplication-TileColor content="#ffb703"><meta itemprop=name content="Vanhackton - Lessons Learned"><meta itemprop=description content="After a very intense weekend I feel like coming from the battle :) But it feels very good to deliver a good result in such a small timeframe. On this post I will describe some lessons learned from the past weekend and some decisions I made that worth.
POC - the start For every project, I allways plan for proof of concepts, small implementations that isolate the implementation complexity by implementing just the necessary, to solve one problem."><meta itemprop=datePublished content="2016-10-26T23:00:17+00:00"><meta itemprop=dateModified content="2016-10-26T23:00:17+00:00"><meta itemprop=wordCount content="819"><meta itemprop=keywords content="500,after battle,angular,dragable,easejs,express,javascript,lessons,nodejs,numeraljs,sqllite,timeline,vanhackaton,video,vote,"><meta property="og:title" content="Vanhackton - Lessons Learned"><meta property="og:description" content="After a very intense weekend I feel like coming from the battle :) But it feels very good to deliver a good result in such a small timeframe. On this post I will describe some lessons learned from the past weekend and some decisions I made that worth.
POC - the start For every project, I allways plan for proof of concepts, small implementations that isolate the implementation complexity by implementing just the necessary, to solve one problem."><meta property="og:type" content="article"><meta property="og:url" content="https://hamiltonlima.com/posts/vanhackton-lessons-learned/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-10-26T23:00:17+00:00"><meta property="article:modified_time" content="2016-10-26T23:00:17+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Vanhackton - Lessons Learned"><meta name=twitter:description content="After a very intense weekend I feel like coming from the battle :) But it feels very good to deliver a good result in such a small timeframe. On this post I will describe some lessons learned from the past weekend and some decisions I made that worth.
POC - the start For every project, I allways plan for proof of concepts, small implementations that isolate the implementation complexity by implementing just the necessary, to solve one problem."><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>Vanhackton - Lessons Learned</title><link rel=stylesheet href=https://hamiltonlima.com/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://hamiltonlima.com>Hamilton Lima</a></div><nav class="site-nav hide-in-mobile"><a href=https://hamiltonlima.com/posts>Posts</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/athanazio target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/hamilton-lima target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://hamiltonlima.com/posts>Posts</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>Oct 26, 2016</span></div><h1>Vanhackton - Lessons Learned</h1></header><div class=content><p><img src=/images/2016/10/2014-06-22-18.26.36.png alt="National Monument at Kuala Lumpur, Malaysia"> After a very intense weekend I feel like coming from the battle :) But it feels very good to deliver a good result in such a small timeframe. On this post I will describe some lessons learned from the past weekend and some decisions I made that worth.</p><h2 id=poc---the-start>POC - the start<a href=#poc---the-start class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>For every project, I allways plan for proof of concepts, small implementations that isolate the implementation complexity by implementing just the necessary, to solve one problem. On this case the problem to solve was:</p><blockquote><p>How to show a DIV over the youtube video</p></blockquote><p>One mistake that I believe I made was that during the research of existing solutions, I only evaluated the UI itself, didn´t look at the page source code to check how they did it. That result in some extra hours to understand how to do it and to implement it. End of the day it worked fine, but it would be better if I read that source codes :) See <a href=https://github.com/hamilton-lima/vanhackaton-video-editor/blob/master/server/client/css/index.css>index.css</a> at #video and #video #questions about the solution used to show the div over the video.</p><h2 id=the-timeline-control>The timeline control<a href=#the-timeline-control class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p><img src=/images/2016/10/2016-10-26_2011.png alt=2016-10-26_2011> The timeline control was a tricky part of the implementation, first I created a div for the white background, then small blue divs over it at the proportional position to show the question timeline. Everything was going until the moment that I felt like I need to drag those divs to change the question second. After trying a lot to use <a href=http://api.jqueryui.com/draggable/#option-containment>dragable()</a> I wasn´t able to make it work inside the div with &ldquo;position: absolute&rdquo;. So I changed plans and created a <a href=http://www.createjs.com/easeljs>EaseJS</a> <a href=http://www.createjs.com/docs/easeljs/classes/Stage.html>stage</a> to draw the timeline and allow the user to drag it and change the question second by dragging it. I know that I should have a little message pushing the user to drag it, or at least change the cursor to indicate that the timeline bars are dragable, but this I realize after everything is finished :) To see the timeline implementation, look for it at <a href=https://github.com/hamilton-lima/vanhackaton-video-editor/blob/master/server/client/app/app.js>app.js</a> at the directive &ldquo;draggableTimeline&rdquo;, that of course should be in a separated file.</p><h2 id=the-database-choice>The database choice<a href=#the-database-choice class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>My first option was to save all the data in flat files, using folders to separate the stories for each user, and to keep one master pointing for the files in the folders, but I drop this idea really quick, when I start to remember how flat files handling can be a pain, specially about zombie processes locking files. So instead of going in the direction of setting an <a href=http://nosql-database.org/>NoSQL DB</a>, or an relational like <a href=https://www.mysql.com/>Mysql</a> or <a href=https://www.postgresql.org/>Postgres</a>, I decided to keep it as simple as possible by going with <a href=https://sqlite.org/>SQLLite</a>. That decision saved me some hours of handling issues like: server setup, user creation, access rights. Everything was plain simple. It was just a matter of write a code to create the table, and some code to save data, yes plain INSERTs, and read data when need, using plain SQL. One main improvement that I can see from the implementation is to separate the database access details in a separated component, So it would be easier to plug other database imeplemention without changing everything. One detail that I believe it worth highlight is that the query function are asynchronous, I gave a try on some implementations using <a href=https://github.com/kriasoft/node-sqlite>Promisses over SQLLite</a>, but I didn&rsquo;t like the syntax at all, It looks confusing to me the end result, this could be result of my stress during the weekend, or quick judgement to avoid potential risks. End of the day <a href=https://github.com/hamilton-lima/vanhackaton-video-editor/blob/master/server/index.js>implemented a simple solution to handle it.</a></p><pre><code>app.get('/api/story/:id', function (req, res) {
	var msg = 'get story from id: ' + req.params.id;
	console.log(msg);

	var result = db.all('SELECT \* FROM story WHERE id = ? ', req.params.id, 
	**function(err,rows){**
		if(err){
			console.log('error: ', err );
  			**res.status(500).send({ error: err });**
  			return;
  		}

		console.log(JSON.stringify(rows));
		res.json(rows);
	});
});
</code></pre><p>In this fragment of code there is a pitfall, that got me several times, that is to forget the return; just after the .status(500).send(&mldr;), I know that the send() method does not end the the function, but somewhere in my brain that line is wired as final, because we literally cannot send anything else as result after that.</p><h2 id=components-hall-of-fame>Components Hall of fame<a href=#components-hall-of-fame class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>These are the shiny little guys that made my life easier!</p><h3 id=client-side>Client side<a href=#client-side class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><ul><li>Youtube player API <a href=https://developers.google.com/youtube/iframe_api_reference#Playback_controls>https://developers.google.com/youtube/iframe_api_reference#Playback_controls</a></li><li>Angular youtube component <a href=https://github.com/brandly/angular-youtube-embed>https://github.com/brandly/angular-youtube-embed</a></li><li>Number format (seconds to hour:minute) just lovely &lt;3 <a href=http://numeraljs.com/>http://numeraljs.com/</a></li><li>Angular inline edit <a href=https://github.com/tameraydin/ng-inline-edit>https://github.com/tameraydin/ng-inline-edit</a></li><li>Angular scroll <a href=https://github.com/oblador/angular-scroll/>https://github.com/oblador/angular-scroll/</a></li><li>Angular UI bootstrap <a href=https://angular-ui.github.io/bootstrap/>https://angular-ui.github.io/bootstrap/</a></li></ul><h3 id=server-side>Server side<a href=#server-side class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><ul><li>Install express routing <a href=https://expressjs.com/en/starter/installing.html>https://expressjs.com/en/starter/installing.html</a></li><li>Install sqllite3 <a href=https://www.npmjs.com/package/sqlite3>https://www.npmjs.com/package/sqlite3</a> Examples using sqllite3 <a href=http://blog.modulus.io/nodejs-and-sqlite>http://blog.modulus.io/nodejs-and-sqlite</a></li><li>Install body parser (don´t forget this one) <a href=https://github.com/expressjs/body-parser>https://github.com/expressjs/body-parser</a></li><li>Sqllite navigator <a href=http://sqlitebrowser.org/>http://sqlitebrowser.org/</a> Icons Used as favicon one icon made by <a href=http://www.flaticon.com/authors/madebyoliver>Madebyoliver</a> from <a href=http://www.flaticon.com>http://www.flaticon.com</a> Licensed by <a href=http://creativecommons.org/licenses/by/3.0>http://creativecommons.org/licenses/by/3.0</a>/</li></ul><h2 id=projectlinks>Project Links<a href=#projectlinks class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><ul><li>Project pitch: <a href=https://youtu.be/Wx09vx0tZd0>https://youtu.be/Wx09vx0tZd0</a></li><li>Live demo: <a href=http://hamiltonlima.com:3000>http://hamiltonlima.com:3000</a></li><li>Source code: <a href=https://github.com/hamilton-lima/vanhackaton-video-editor>https://github.com/hamilton-lima/vanhackaton-video-editor</a></li><li>Project pitch in portuguese: <a href="https://www.youtube.com/watch?v=vcZZ0uiL2Ns">https://www.youtube.com/watch?v=vcZZ0uiL2Ns</a></li></ul><h2 id=vote>Vote<a href=#vote class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>If you like the project, goto to the url bellow and click on WANT to vote for it. <a href=https://wantoo.io/vanhackathon/5561/video-editor/>https://wantoo.io/vanhackathon/5561/video-editor/</a> <a href=https://wantoo.io/vanhackathon/5561/video-editor/><img src=/images/2016/10/vote.jpg alt=vote></a></p></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://hamiltonlima.com/tags/500>500</a></span><span class=tag><a href=https://hamiltonlima.com/tags/after-battle>after battle</a></span><span class=tag><a href=https://hamiltonlima.com/tags/angular>angular</a></span><span class=tag><a href=https://hamiltonlima.com/tags/dragable>dragable</a></span><span class=tag><a href=https://hamiltonlima.com/tags/easejs>easejs</a></span><span class=tag><a href=https://hamiltonlima.com/tags/express>express</a></span><span class=tag><a href=https://hamiltonlima.com/tags/javascript>javascript</a></span><span class=tag><a href=https://hamiltonlima.com/tags/lessons>lessons</a></span><span class=tag><a href=https://hamiltonlima.com/tags/nodejs>nodejs</a></span><span class=tag><a href=https://hamiltonlima.com/tags/numeraljs>numeraljs</a></span><span class=tag><a href=https://hamiltonlima.com/tags/sqllite>sqllite</a></span><span class=tag><a href=https://hamiltonlima.com/tags/timeline>timeline</a></span><span class=tag><a href=https://hamiltonlima.com/tags/vanhackaton>vanhackaton</a></span><span class=tag><a href=https://hamiltonlima.com/tags/video>video</a></span><span class=tag><a href=https://hamiltonlima.com/tags/vote>vote</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>819 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2016-10-26 23:00 +0000</p></footer></article><div class="post-nav thin"><a class=next-post href=https://hamiltonlima.com/posts/closing-github-issues-on-commit/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>Closing github issues on commit</span></a>
<a class=prev-post href=https://hamiltonlima.com/posts/vanhackton-final-submission/><span class=post-nav-label>Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>Vanhackton final submission</span></a></div><div id=comments class=thin></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2021 <a href=https://hamiltonlima.com>Hamilton Lima</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://hamiltonlima.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://hamiltonlima.com/js/bundle.min.7d8545daa55d62427355498dd8da13f98ff79a7938ce7d2a5e2ae1ec0de3beb8.js integrity="sha256-fYVF2qVdYkJzVUmN2NoT+Y/3mnk4zn0qXirh7A3jvrg=" crossorigin=anonymous></script></body></html>